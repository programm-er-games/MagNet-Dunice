<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–ª—é—á–∏ | –í–µ—Å—å —Å–ø–∏—Å–æ–∫ | –û—Ö—Ä–∞–Ω–Ω–∏–∫</title>
  <link rel="stylesheet" href="../styles/table.css">
</head>

<body>
  <!-- –í–ï–†–•–ù–ò–ô –ë–ê–† -->
  <nav class="nav-bar">
    <div class="logo">
      <img src="../image/logo2.svg" class="logo">
    </div>
  </nav>


  <div class="table-container">
    <div class="data-office">
        <!-- —Å–ø–∏—Å–æ–∫ -->
         <div class="Noffice">120</div>
         <div class="Noffice">130</div>
         <div class="Noffice">140</div>
         <div class="Noffice">150</div>
         <div class="Noffice">160</div>
    </div>
  </div>

  <!-- –±–∞—Ä –Ω–∞–∑–∞–¥ -->
  <div class="pass">
    <p class="text-arrow">–Ω–∞–∑–∞–¥</p>
    <img src="../image/arrow1.png" class="arrow">
  </div>

  <!-- –î–æ–ø—ã -->
  <!-- <div class="search-container" id="searchContainer">
    <span class="search-icon">üîç</span>
    <p class="nado"> ‚óà –ü–æ–∏—Å–∫ </p>
    <span class="filter-container">
      <select name="filter" id="filterBlock">
        <option value="">-</option>
      </select>
    </span>
    <input type="text" class="search-input" placeholder="–ü–æ–∏—Å–∫...">
  </div> -->

  <div id="date" class="date"></div>
  <div class="ins">|</div>
  <div id="time" class="time"></div>

  </div>
  <div class="log-out">
    <a href="../page/index.html" id="logout">–í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã</a>
  </div>

  <div class="horizontal-line1"></div>
  <div class="horizontal-line2"></div>

  <!-- –°–ö–†–ò–ü–¢–´ -->
  <script src="../app/script.js"></script>
  <script>
    let interval_id;
    function auto_refresh(turn_on) {
      if (turn_on === true)
        interval_id = setInterval(() => {
          window.db_api.read("key_logs");
        }, 500);
      else clearInterval(interval_id);
    }
    const searchContainer = document.getElementById('searchContainer');
    const searchIcon = searchContainer.querySelector('span.search-icon');
    // window.debug_api.out("Hello from table people!", "table_people.html");
    const fields = window.db_api.get_fields("key_logs");

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—ã–µ–∑–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ
    searchContainer.addEventListener('click', (event) => {
      searchContainer.classList.add('active');
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ –º–µ—Å—Ç–æ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –ø—É—Å—Ç–æ–µ –º–µ—Å—Ç–æ
    document.addEventListener('click', (event) => {
      if (!searchContainer.contains(event.target)) {
        searchContainer.classList.remove('active');
        event.stopPropagation(); // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è, —á—Ç–æ–±—ã –∫–ª–∏–∫ –Ω–µ —É—Ö–æ–¥–∏–ª –¥–∞–ª—å—à–µ
      }
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, —Å–ª–µ–¥—É—è –∑–∞–¥–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º
    searchIcon.addEventListener('click', (event) => {
      event.stopPropagation(); // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è, —á—Ç–æ–±—ã –∫–ª–∏–∫ –Ω–µ —É—Ö–æ–¥–∏–ª –¥–∞–ª—å—à–µ
      // window.debug_api.out("IN CLICK EVENT!!!", "table_people.html");
      if (searchContainer.classList.contains('active') === true) {
        // window.debug_api.out("IN ACTIVE EVENT!!!", "table_people.html");
        const filter = document.querySelector("select#filterBlock").value;
        const filter_value = document.querySelector("input.search-input").value;
        // window.debug_api.out("filter: ", "table_people.html");
        // window.debug_api.out(filter, "table_people.html");
        // window.debug_api.out("filter_value: ", "table_people.html");
        // window.debug_api.out(filter_value, "table_people.html");
        if (filter !== null && filter_value !== "") {
          window.db_api.filter("key_logs", filter, filter_value);
          auto_refresh(false);
        }
        else {
          window.db_api.read("key_logs");
          auto_refresh(true);
        }
      }
      else {
        searchContainer.classList.add('active');
      }
    });
  </script>
  <script>
    // setInterval(() => {
    //   window.db_api.read("key_logs");
    // }, 500);
    window.db_api.read("key_logs");
    auto_refresh(false);
    document.addEventListener('selectstart', function (e) {
      e.preventDefault(); // –û—Ç–∫–ª—é—á–∞–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
    });
  </script>
  <script>
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç .pass
    document.querySelector('.pass').addEventListener('click', function () {
      // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–æ–π HTML —Ñ–∞–π–ª
      window.location.href = '../page/base.html'; // –ó–∞–º–µ–Ω–∏—Ç–µ 'another-page.html' –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ HTML —Ñ–∞–π–ª–∞
    });
  </script>
  <script>
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∞—Å—à—Ç–∞–± –Ω–∞ 100%
    function setZoomLevel() {
      document.body.style.zoom = "100%";
    }

    // –ë–ª–æ–∫–∏—Ä—É–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∞ —á–µ—Ä–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –∏ –º—ã—à—å
    window.addEventListener('keydown', function (e) {
      if ((e.ctrlKey && (e.key === '=' || e.key === '-' || e.key === '0')) || e.key === 'F11') {
        e.preventDefault();
      }
    });

    window.addEventListener('wheel', function (e) {
      if (e.ctrlKey) {
        e.preventDefault();
      }
    }, { passive: false });

    // –°–ª–µ–¥–∏–º –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –º–∞—Å—à—Ç–∞–± –Ω–∞ 100%
    window.addEventListener('resize', setZoomLevel);

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–± –Ω–∞ 100%
    setZoomLevel();



    function updateClock() {
      const now = new Date();

      // –ü–æ–ª—É—á–∞–µ–º –≤—Ä–µ–º—è
      let hours = String(now.getHours()).padStart(2, '0');
      let minutes = String(now.getMinutes()).padStart(2, '0');
      let seconds = String(now.getSeconds()).padStart(2, '0');

      // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤—Ä–µ–º—è –≤ HH:MM:SS
      let timeString = `${hours}:${minutes}:${seconds}`;

      // –ü–æ–ª—É—á–∞–µ–º –¥–∞—Ç—É
      let day = String(now.getDate()).padStart(2, '0');
      let month = String(now.getMonth() + 1).padStart(2, '0'); // –ú–µ—Å—è—Ü—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å 0
      let year = now.getFullYear();

      // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É –≤ DD.MM.YYYY
      let dateString = `${day}.${month}.${year}`;

      // –û–±–Ω–æ–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
      document.getElementById('time').textContent = timeString;
      document.getElementById('date').textContent = dateString;
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º —á–∞—Å—ã –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
    setInterval(updateClock, 1000);

    // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤, —á—Ç–æ–±—ã —á–∞—Å—ã –Ω–∞—á–∞–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ä–∞–∑—É
    updateClock();


  </script>
</body>

</html>